<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    
    <title>Attendance System - HOME</title>
    <link rel="stylesheet" type="text/css" href="../static/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../static/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../static/css/select2.min.css">
    <link rel="stylesheet" type="text/css" href="../static/css/style.css">
    <!--[if lt IE 9]>
		<script src="../static/js/html5shiv.min.js"></script>
		<script src="../static/js/respond.min.js"></script>
	<![endif]-->
</head>

<body>
    <div class="main-wrapper">
        <div class="header">
			<div class="header-left">
				<a href="index.html" class="logo">
					<img src="../static/img/KIt logo.png" width="35" height="35" alt=""> <span>Attendance</span>
				</a>
			</div>
			<!-- <a id="toggle_btn" href="javascript:void(0);"><i class="fa fa-bars"></i></a> -->
            <a id="mobile_btn" class="mobile_btn float-left" href="#sidebar"><i class="fa fa-bars"></i></a>
            <ul class="nav user-menu float-right">                
                <li class="nav-item dropdown has-arrow">
                    <a href="#" class="dropdown-toggle nav-link user-link" data-toggle="dropdown">
                        <span class="user-img"><img class="rounded-circle" src="../static/img/user.jpg" width="40" alt="Admin">
							<span class="status online"></span></span>
                        <span>Admin</span>
                    </a>
					<div class="dropdown-menu">
						<a class="dropdown-item" href="{{ url_for('profile')}}">My Profile</a>
						<a class="dropdown-item" href="{{ url_for('login')}}">Logout</a>
					</div>
                </li>
            </ul>
            <div class="dropdown mobile-user-menu float-right">
                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-ellipsis-v"></i></a>
                <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item" href="{{ url_for('profile')}}">My Profile</a>                  
                    <a class="dropdown-item" href="{{ url_for('login')}}">Logout</a>
                </div>
            </div>
        </div>
        <div class="sidebar" id="sidebar">
            <div class="sidebar-inner slimscroll">
                <div id="sidebar-menu" class="sidebar-menu">
                    <ul>
                        <li class="menu-title">Main</li>        
                        <!-- Dashboard Link -->
                        <li class="{% if request.endpoint == 'dashboard' %}active{% endif %}">
                            <a href="{{ url_for('index') }}"><i class="fa fa-dashboard"></i> <span>Dashboard</span></a>
                        </li>        
                        <!-- Students List Link -->
                        <li class="{% if request.endpoint == 'students_list' %}active{% endif %}">
                            <li><a href="{{ url_for('students_list') }}"><i class="fa fa-user"></i> <span>Students List</span></a></li>
                        </li>
        
                        <!-- Attendance Link -->
                        <li class="{% if request.endpoint == 'attendance' %}active{% endif %}">
                            <a href="{{ url_for('attendance') }}"><i class="fa fa-user"></i> <span>Attendance</span></a>
                        </li>        
                        <!-- Calendar Link -->
                        <li class="{% if request.endpoint == 'calendar' %}active{% endif %}">
                            <a href="{{ url_for('calendar') }}"><i class="fa fa-calendar"></i> <span>Calendar</span></a>
                        </li>        
                        <!-- Login Link -->
                        <li class="{% if request.endpoint == 'login' %}active{% endif %}">
                            <a href="{{ url_for('login') }}"> Login </a>
                        </li>
        
                        <!-- Register Link -->
                        <li class="{% if request.endpoint == 'register' %}active{% endif %}">
                            <a href="{{ url_for('register') }}"> Register </a>
                        </li>
        
                        <!-- Forgot Password Link -->
                        <li class="{% if request.endpoint == 'forgot_password' %}active{% endif %}">
                            <a href="{{ url_for('forgot_password') }}"> Forgot Password </a>
                        </li>        
                        <!-- Change Password Link -->
                        <li class="{% if request.endpoint == 'change_password' %}active{% endif %}">
                            <a href="{{ url_for('change_password') }}"> Change Password </a>
                        </li>                                      
                        <!-- Profile Link -->
                        <li class="{% if request.endpoint == 'profile' %}active{% endif %}">
                            <a href="{{ url_for('profile') }}"> Profile </a>
                        </li>                               
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="page-wrapper">
            <div class="content">
                <div class="row">
                    <div class="col-sm-12">
                        <h4 class="page-title">Attendance Sheet</h4>
                    </div>
                </div>
                <div class="row filter-row">
                    <div class="col-sm-6 col-md-3">
                        <div class="form-group form-focus">
                            <label class="focus-label">Student Name</label>
                            <input type="text" class="form-control floating">
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-3">
                        <div class="form-group form-focus select-focus">
                            <label class="focus-label">Select Month</label>
                            <select class="select floating">
                                <option>-</option>
                                <option>Jan</option>
                                <option>Feb</option>
                                <option>Mar</option>
                                <option>Apr</option>
                                <option>May</option>
                                <option>Jun</option>
                                <option>Jul</option>
                                <option>Aug</option>
                                <option>Sep</option>
                                <option>Oct</option>
                                <option>Nov</option>
                                <option>Dec</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-3">
                        <div class="form-group form-focus select-focus">
                            <label class="focus-label">Select Year</label>
                            <select class="select floating">
                                <option>-</option>
                                <option>2023</option>
                                <option>2022</option>
                                <option>2021</option>
                                <option>2020</option>
                                <option>2019</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-3">
                        <a href="#" class="btn btn-success btn-block"> Search </a>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="table-responsive">
                            <table class="table table-striped custom-table mb-0">
                                <thead>
                                    <tr>
                                        <th>Student Name</th>
                                        {% for day in range(1, 32) %}
                                        <th>{{ day }}</th>
                                        {% endfor %}
                                    </tr>
                                </thead>
                                <tbody id="attendanceTableBody">
                                    <!-- Table rows will be dynamically inserted here -->
                                </tbody>
                            </table>
                            <div id="noDataMessage" style="display: none; text-align: center; margin-top: 20px;">
                                <p>No Data Available</p>
                            </div>
                        </div>
                    </div>
                </div>
                <script>
                    document.addEventListener("DOMContentLoaded", function() {
                        // Example dynamic data (replace this with data from Flask or another source)
                        const attendanceData = [
                            {
                                student_name: "John Doe",
                                attendance: ["present", "absent", "present", "absent", "present", "present", "present", "absent", "absent", "present", "present", "absent", "present", "absent", "present", "present", "absent", "absent", "present", "present", "present", "absent", "present", "absent", "present", "absent", "present", "present", "absent", "present", "present"]
                            },
                            {
                                student_name: "Jane Smith",
                                attendance: ["absent", "present", "present", "present", "absent", "present", "absent", "absent", "absent", "present", "absent", "present", "present", "absent", "present", "absent", "present", "absent", "present", "present", "absent", "present", "present", "absent", "present", "absent", "present", "present", "absent", "present"]
                            }
                        ];
                
                        // Get the table body and no data message element
                        const tableBody = document.getElementById("attendanceTableBody");
                        const noDataMessage = document.getElementById("noDataMessage");
                
                        // If no data, display the "No Data" message
                        if (attendanceData.length === 0) {
                            tableBody.style.display = 'none';
                            noDataMessage.style.display = 'block';
                        } else {
                            tableBody.style.display = 'table-row-group';
                            noDataMessage.style.display = 'none';
                
                            // Populate the table with the attendance data
                            attendanceData.forEach(record => {
                                const row = document.createElement("tr");
                                const nameCell = document.createElement("td");
                                nameCell.textContent = record.student_name;
                                row.appendChild(nameCell);
                
                                // Loop through attendance data (31 days)
                                for (let i = 0; i < 31; i++) {
                                    const cell = document.createElement("td");
                                    const status = record.attendance[i] || "absent"; // Default to "absent" if no data for the day
                                    const icon = document.createElement("i");
                                    icon.classList.add("fa");
                                    icon.classList.add(status === "present" ? "fa-check" : "fa-close");
                                    icon.classList.add(status === "present" ? "text-success" : "text-danger");
                                    cell.appendChild(icon);
                                    row.appendChild(cell);
                                }
                
                                tableBody.appendChild(row);
                            });
                        }
                    });
                </script>                            
            </div>            
        </div>
    </div>
    <div class="sidebar-overlay" data-reff=""></div>
    <script src="../static/js/jquery-3.2.1.min.js"></script>
	<script src="../static/js/popper.min.js"></script>
    <script src="../static/js/bootstrap.min.js"></script>
    <script src="../static/js/jquery.slimscroll.js"></script>
    <script src="../static/js/select2.min.js"></script>
    <script src="../static/js/app.js"></script>
</body>

</html>